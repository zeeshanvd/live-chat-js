!function(){const e=document.currentScript.getAttribute("data-business-id"),n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/sendbird@3.1.33/SendBird.min.js";const t="https://cdn-icons-png.flaticon.com/128/847/847969.png";n.onload=function(){const n=document.createElement("style");n.textContent='\n            body {\n                font-family: Arial, sans-serif;\n            }\n            #chat-container {\n                display: flex;\n                flex-direction: column-reverse;\n                height: 65%;\n                overflow-y: auto;\n                padding: 10px;\n                border: 1px solid #ccc;\n                border-radius: 5px;\n                background-color: #fff;\n                margin-bottom: 10px;\n            }\n            #chat-section-header {\n                display: block;\n                line-height: 1px;\n                font-size: 1.5em;\n                margin-block-start: 0.83em;\n                margin-block-end: 0.83em;\n                margin-inline-start: 0px;\n                margin-inline-end: 0px;\n                font-weight: bold;\n                unicode-bidi: isolate;\n            }\n            #chat-section {\n                flex: 1;\n                margin: 0 auto;\n                padding: 0 10px 0 10px;\n                border: 1px solid #ccc;\n                border-radius: 5px;\n                background-color: #f9f9f9;\n                display: none;\n                flex-direction: column;\n                height: inherit;\n                overflow-y: auto;\n            }\n            #message-input {\n                width: 100%;\n                padding: 10px;\n                box-sizing: border-box;\n                border: 1px solid #ccc;\n                border-radius: 5px;\n            }\n            .message {\n                align-items: center;\n                margin-bottom: 10px;\n                padding: 10px;\n                border-radius: 5px;\n                max-width: 80%;\n            }\n\n            .message.user {\n                background-color: #1a76d1;\n                color: #ffffff;\n                align-self: flex-end;\n            }\n\n            .message.other {\n                background-color: #ececec;\n                align-self: flex-start;\n            }\n\n            .message img {\n                width: 30px;\n                height: 30px;\n                border-radius: 50%;\n                border: 1.5px solid lightgray;\n                margin-right: 10;\n            }\n\n            .message.user img {\n                margin-right: 10;\n            }\n\n            .message .message-content {\n                display: flex;\n                align-items: center;\n                margin-bottom: 8px;\n            }\n\n            .message .message-content .message-header {\n              display: flex;\n              align-items: center;\n            }\n\n            .message .message-content .message-sender {\n                font-weight: bold;\n                margin: 0 10px 0 10px;\n            }\n\n            .message .message-text {\n                word-wrap: break-word;\n                line-break: auto;\n            }\n            .message .message-text a {\n                text-decoration: underline;\n            }\n            #send-button {\n                height: 35px;\n                width: 60px;\n                padding: 10px;\n                background-color: #1A76D1;\n                color: white;\n                border: none;\n                border-radius: 5px;\n                cursor: pointer;\n                margin-left: 10px;\n            }\n            #form-container {\n                display: none;\n            }\n            #sendbird-widget {\n              position: fixed;\n              bottom: 10px;\n              right: 20px;\n              width: 50px;\n              height: 50px;\n              background-color: #1A76D1; /* Customize the color */\n              border-radius: 50%;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              cursor: pointer;\n              z-index: 9999;\n            }\n            #sendbird-widget:after {\n              content: "ðŸ’¬"; /* Use an emoji or icon */\n              font-size: 30px;\n              color: white;\n            }\n            #sendbird-chat-container {\n              display: none;\n              position: fixed;\n              bottom: 70px;\n              right: 10px;\n              width: 300px;\n              height: 400px;\n              background-color: white;\n              border: 1px solid #ccc;\n              border-radius: 10px;\n              box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n              z-index: 9999;\n            }\n            #user-form {\n                max-width: 400px;\n                margin: 0 auto;\n                padding: 20px;\n                border-radius: 5px;\n            }\n            #user-form label {\n                display: block;\n                margin-bottom: 8px;\n                font-weight: bold;\n            }\n            #user-form input {\n                width: 100%;\n                padding: 8px;\n                margin-bottom: 16px;\n                border: 1px solid #ccc;\n                border-radius: 4px;\n                box-sizing: border-box;\n            }\n            #user-form button {\n                width: 100%;\n                padding: 10px;\n                background-color: #1A76D1;\n                color: white;\n                border: none;\n                border-radius: 4px;\n                cursor: pointer;\n                bottom: 0;\n            }\n            #user-form button:hover {\n                background-color: #1973cc;\n            }\n            #send-button:hover {\n                background-color: #1973cc;\n            }\n            #input-container {\n                display: flex;\n                align-items: center;\n            }\n            #user-status {\n              height: 10px;\n              width: 10px;\n              border-radius: 5px;\n              margin: 3px;\n              background-color: gray;\n              display: inline-block;\n              margin-right: 10px;\n            }\n        ',document.head.appendChild(n);document.body.insertAdjacentHTML("beforeend",'\n            <div id="sendbird-widget"></div>\n            <div id="sendbird-chat-container" style="display: none">\n                <div id="form-container" style="display: none">\n                    <form id="user-form" onsubmit="submitForm(event)">\n                        <label for="email">Email:</label>\n                        <input type="email" id="email" name="email" required><br>\n\n                        <label for="phone">Phone Number:</label>\n                        <input type="tel" id="phone" name="phone" required><br>\n\n                        <label for="username">Name:</label>\n                        <input type="text" id="username" name="username" required><br><br>\n\n                        <button type="submit">Start Chat</button>\n                    </form>\n                </div>\n                <div id="chat-section" style="display: none">\n                    <div id="chat-section-header" ><div id="user-status"></div>Live Chat</div> \n                    <div id="chat-container">\n                        <div id="chat-loader" style="display: none;">Loading...</div>\n                    </div>\n                    <div id="input-container">\n                        <input type="text" id="message-input" placeholder="Type your message here..." />\n                        <button id="send-button">Send</button>\n                    </div>\n                </div>\n            </div>\n        '),document.getElementById("message-input").addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("send-button").click())}));const o=new SendBird({appId:"DC709286-063D-4EA7-9811-55F0037B5303"});function s(n,t=!1){console.log("Initiating chat with:",n),document.getElementById("chat-loader").style.display="block",o.connect(n.username,(function(s,a){if(a)return void console.error("Connection failed:",a);console.log("Connected to Sendbird as:",s),o.updateCurrentUserInfo(n.username,null,(function(e,n){n&&console.error("Failed to update user info:",n)}));let d="";const l=new o.GroupChannelParams;function c(e){o.GroupChannel.getChannel(e,(async function(e,n){if(n)return void console.error("Channel retrieval failed:",n);const t=new o.MessageListParams;t.prevResultSize=100,e.getMessagesByTimestamp(Date.now(),t,(function(n,o){if(o)console.log("Error fetching messages:",o);else if(console.log("Fetched messages:",n),n.length>0&&i(n),100===n.length){const o=n[n.length-1].createdAt;t.prevResultSize=100,e.getMessagesByTimestamp(o,t,(function(e,n){n?console.log("Error fetching next page of messages:",n):(console.log("Fetched more messages:",e),i(e))}))}}))}))}function m(){const n=new o.UserEventHandler;n.onUserOnline=function(n){console.log("--------STATUS--ON------",n),n.userId===e&&(console.log("User is online:",n),document.getElementById("user-status").style.backgroundColor="green")},n.onUserOffline=function(n){console.log("--------STATUS--OFF------",n),n.userId===e&&(console.log("User is offline:",n),document.getElementById("user-status").style.backgroundColor="gray")},o.addUserEventHandler("unique-user-handler-id",n)}function u(e){""!==e.trim()?(console.log("Sending message:",e),o.GroupChannel.getChannel(d,(function(n,t){t?console.error("Failed to get channel:",t):n.sendUserMessage(e,(function(e,n){n?console.error("Message sending failed:",n):(console.log("Message sent:",e),c(d),r(e),document.getElementById("message-input").value="")}))}))):console.warn("Cannot send an empty message")}l.addUserIds([n.username,e]),l.isDistinct=!0,l.name=n.username,l.nickname=n.username,l.channelName=n.username,o.GroupChannel.createChannel(l,(async function(e,s){if(s)return void console.error("Channel creation failed:",s);d=e.url;const i=new o.MessageListParams;i.prevResultSize=1,e.getMessagesByTimestamp(Date.now(),i,(function(e,s){if(s)console.log("Error fetching messages:",s);else{if(0===e.length&&t){const e=JSON.stringify(n);document.getElementById("chat-loader").style.display="none",u(e)}c(d),function(e){const n=new o.ChannelHandler;m(),n.onMessageReceived=function(n,t){n.url===e&&r(t)},o.addChannelHandler("unique-handler-id",n)}(d),m()}}))})),document.getElementById("send-button").onclick=function(){u(document.getElementById("message-input").value)}}))}function r(e){let n;if(a(e.message))try{const t=JSON.parse(e.message);n=`\n                        Email: ${t.email}<br>\n                        Phone No: ${t.phoneNumber}<br>\n                    `}catch(t){console.error("Invalid JSON message:",e.message),n=e.message}else n=e.message;const s=n.replace(/(https?:\/\/[^\s]+)/g,(function(e){return`<a href="${e}" target="_blank">${e}</a>`})),r=document.getElementById("chat-container"),i=document.createElement("div");i.className="message "+(e._sender.userId===o.currentUser.userId?"user":"other");const d=document.createElement("img");d.src=e._sender.profileUrl||t;const l=document.createElement("div");l.className="message-content";const c=document.createElement("div");c.className="message-sender",c.textContent=e._sender.nickname;const m=document.createElement("div");m.className="message-text",m.innerHTML=s,l.appendChild(d),l.appendChild(c),i.appendChild(l),i.appendChild(m),r.insertBefore(i,r.firstChild),r.scrollTop=r.scrollHeight}function i(e){const n=document.getElementById("chat-container");n.innerHTML="",e.reverse().forEach((e=>{let s;if(a(e.message))try{const n=JSON.parse(e.message);s=`\n                        Email: ${n.email}<br>\n                        Phone No: ${n.phoneNumber}<br>\n                    `}catch(n){console.error("Invalid JSON message:",e.message),s=e.message}else s=e.message;const r=s.replace(/(https?:\/\/[^\s]+)/g,(function(e){return`<a href="${e}" target="_blank">${e}</a>`})),i=document.createElement("div");i.className="message "+(e._sender.userId===o.currentUser.userId?"user":"other");const d=document.createElement("img");d.src=e._sender.profileUrl||t;const l=document.createElement("div");l.className="message-content";const c=document.createElement("div");c.className="message-sender",console.log("Sender:-------------",e),console.log("Sender:-------------",e._sender),c.textContent=e._sender.nickname;const m=document.createElement("div");m.className="message-text",m.innerHTML=r,l.appendChild(d),l.appendChild(c),i.appendChild(l),i.appendChild(m),n.appendChild(i)})),n.scrollTop=n.scrollHeight}function a(e){try{return JSON.parse(e),!0}catch(e){return!1}}document.getElementById("sendbird-widget").addEventListener("click",(function(){const e=document.getElementById("sendbird-chat-container"),n=document.getElementById("form-container"),t=document.getElementById("chat-section");"none"===e.style.display?(e.style.display="block","none"===t.style.display?n.style.display="block":n.style.display="none"):e.style.display="none"})),window.submitForm=function(e){e.preventDefault();const n={email:document.getElementById("email").value,phoneNumber:document.getElementById("phone").value,username:document.getElementById("username").value};document.getElementById("form-container").style.display="none",document.getElementById("chat-section").style.display="block",s(n,!0)}},document.head.appendChild(n)}();